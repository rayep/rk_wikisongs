(()=>{"use strict";var e,t={104:(e,t,r)=>{var n=r(1546),o=r(7546),a=r(6485);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){var r;(null===(r=u(e))||void 0===r||!r.length)&&s(e,t)}function s(e,t){return localStorage.setItem(e,JSON.stringify(t))}function u(e){return JSON.parse(localStorage.getItem(e))}var c=r(6363),d=r(4969),f=r(4668),m=/\b\d{4}\b/,p=/^"/;function h(e){return e?"https:".concat(e):e}var y=r(5672),b=r(7542),g=r(696),v=r(3174),j=r(4073),x=r(1290),S=r(277),A=r(6051),C=r(6842),w=r(7259);function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var I=(0,c.createContext)(null);function M(e){var t=e.value;return(0,w.jsx)(o.B,{align:"center",justify:"center",padding:"none",children:(0,w.jsx)(g.Q,{href:"https://en.wikipedia.org/wiki/".concat(t),target:"_blank",leadingVisual:(0,w.jsx)(x.fCU,{size:16}),as:"a",variant:"primary",children:"Wiki Link"})})}function L(e){var t=e.toggleCreateDialog,r=e.setComposerURL,n=k((0,c.useState)(""),2),a=n[0],i=n[1],l=k((0,c.useState)(!1),2),s=l[0],u=l[1],d=(0,c.useContext)(I).setAppLoadType;return(0,w.jsx)(j.l,{title:"Create Composer Dashboard",onClose:function(){return t(!1)},children:(0,w.jsxs)(S.A,{required:!0,children:[(0,w.jsx)(S.A.Label,{children:"URL"}),(0,w.jsx)(A.A,{placeholder:"Enter wikipedia URL",block:!0,onChange:function(e){return i(e.target.value)},value:a,leadingVisual:(0,w.jsx)(x.fCU,{size:16})}),s&&setTimeout(function(){return u(!1)},3e3)&&(0,w.jsx)(S.A.Validation,{variant:"error",children:"Invalid URL"}),(0,w.jsxs)(o.B,{direction:"horizontal",align:"center",justify:"center",padding:"condensed",children:[(0,w.jsx)(g.Q,{variant:"primary",onClick:function(){var e=function(e){try{var t=new URL(e),r=t.origin,n=t.pathname;return!!/[w{2}\.]wikipedia.org/.test(r)&&(n.includes("/wiki/")?"".concat(r,"/w/rest.php/v1/page/").concat(n.split("/").pop(),"/html"):!!n.includes("/w/rest.php/v1/page/")&&e)}catch(e){return!1}}(a);e?(r(e),d("create"),t(!1)):(u(!0),i(""))},children:"Create"}),(0,w.jsx)(g.Q,{variant:"danger",onClick:function(){return i("")},children:"Reset"})]})]})})}function P(e){var t=e.toggleCreate;return(0,w.jsxs)(C.E,{spacious:!0,className:"overlay_center",children:[(0,w.jsx)(C.E.Heading,{children:"Welcome to WikiSongs"}),(0,w.jsx)(C.E.Description,{children:"Use WikiSongs to store any composer's discography & filmography songs metadata, retrieved from Wikipedia."}),(0,w.jsx)(C.E.PrimaryAction,{size:"large",onClick:function(){return t(!0)},leadingVisual:(0,w.jsx)(x.Abk,{size:16}),children:"Create"})]})}function T(){var e=k((0,c.useState)(!1),2),t=e[0],r=e[1],n=k((0,c.useState)(null),2),o=n[0],a=n[1],i=(0,c.useContext)(I),l=i.appLoadType,s=i.darkMode,u=i.setDarkMode;return(0,w.jsxs)("div",{children:[t&&(0,w.jsx)(L,{toggleCreateDialog:r,setComposerURL:a}),!l&&(0,w.jsx)(P,{createStatus:t,toggleCreate:r}),l&&(0,w.jsx)(ee,{url:o}),(0,w.jsx)("div",{children:(0,w.jsx)(g.Q,{variant:"invisible",className:"colorMode-button",onClick:function(e){e.stopPropagation(),u(!s)},children:s?(0,w.jsx)(x.gLX,{size:16}):(0,w.jsx)(x.rRK,{size:16})})})]})}function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach(function(t){B(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function B(e,t,r){return(t=function(e){var t=function(e){if("object"!=D(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==D(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z=(0,c.createContext)(null);function U(e){var t=e.albumName,r=e.toggleSongDialog,n=(0,c.useContext)(z),i=n.songs,l=n.likedSongs,s=n.setLikedSongs,u=i[t],d=l[t];function f(e){s(function(r){var n=N(N({},d),{},B({},e,!d||!d[e]));return N(N({},r),{},B({},t,n))})}return(0,w.jsx)(j.l,{title:(0,w.jsx)(a.A,{as:"h2",children:t}),onClose:function(){return r(!1)},width:"large",height:"auto",children:(0,w.jsxs)(o.B,{gap:"normal",padding:"normal",children:[(0,w.jsx)(M,{value:t}),null==u?void 0:u.map(function(e){return(0,w.jsx)(R,{name:e,isSongLiked:!!d&&d[e],toggleSongLike:f},e)})]})})}function R(e){var t=e.name,r=e.isSongLiked,n=e.toggleSongLike;return(0,w.jsxs)(o.B,{direction:"horizontal",align:"center",justify:"space-between",onClick:function(e){e.stopPropagation(),n(t)},children:[(0,w.jsx)(f.A,{weight:r?"semibold":"normal",children:t}),(0,w.jsx)(y.A,{variant:r?"success":"danger",children:r?"Liked":"Skipped"})]})}function W(e,t){var r=document.createElement("canvas"),n=r.getContext("2d"),o=new Image;o.src=e,o.setAttribute("crossOrigin","anonymous"),o.onload=function(){r.width=o.width,r.height=o.height,n.drawImage(o,0,0),t(r.toDataURL("image/png")),r.remove()}}function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach(function(t){Y(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Y(e,t,r){return(t=function(e){var t=function(e){if("object"!=V(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var _=(0,c.createContext)(null);function q(e){var t,r,n=e.name,a=e.isLinkValid,i=(0,c.useContext)(_),l=i.completedAlbums,s=i.setCompletedAlbums,u=i.albumsMetadata,d=i.setAlbumsMetadata,f=(0,c.useContext)(z),y=f.songs,b=f.setSongs,g=(t=(0,c.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?J(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=g[0],j=g[1],x=u[n],S=l[n];return(0,w.jsxs)(o.B,{gap:"condensed",direction:"vertical",align:"center",justify:"center",style:{cursor:"pointer",backgroundColor:S?"var(--bgColor-success-muted)":"unset"},padding:"normal",onClick:function(e){var t;e.stopPropagation(),(null===(t=y[n])||void 0===t||!t.length)&&$.get("https://en.wikipedia.org/w/rest.php/v1/page/".concat(n,"/html"),function(e){var t,r,o=(t=$(e),{albumYear:(r=$("table.vevent",t)).find(".infobox-label:contains(Release) ~ td").text().match(m).join(),albumPoster:h(r.find(".infobox-image img").attr("src"))});W(o.albumPoster,function(e){o.albumPoster=e,d(function(e){return Q(Q({},e),{},Y({},n,o))})});var a=function(e){return $('td:contains(")',e).map(function(){return $(this).text().match(p)?$(this).text():null}).get()}($(e));b(function(e){return Q(Q({},e),{},Y({},n,a))})}),!v&&j(!0)},children:[v&&(0,w.jsx)(U,{albumName:n,toggleSongDialog:j},n),(0,w.jsx)(K,{isAlbumCompleted:S,isLinkValid:a}),(0,w.jsx)(G,{albumName:n,albumMetadata:x}),(0,w.jsx)(H,{isAlbumCompleted:S,toggleCompleted:function(){s(function(e){return Q(Q({},e),{},Y({},n,!S))})}})]})}function K(e){var t=e.isAlbumCompleted,r=e.isLinkValid;return(0,w.jsxs)(o.B,{justify:"center",align:"center",gap:"condensed",padding:"none",children:[(0,w.jsx)(y.A,{variant:t?"success":"attention",children:t?"Completed":"Open"}),!r&&(0,w.jsx)(v.v,{variant:"critical",size:"small",children:"Invalid Link"})]})}function G(e){var t=e.albumName,r=e.albumMetadata;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.A,{square:!0,src:(null==r?void 0:r.albumPoster)||"./assets/music-album.svg",size:{narrow:100,regular:125,wide:150}}),(0,w.jsx)(b.A,{maxWidth:"15ch",children:t}),(null==r?void 0:r.albumYear)&&(0,w.jsx)(f.A,{children:r.albumYear})]})}function H(e){var t=e.isAlbumCompleted,r=e.toggleCompleted;return(0,w.jsx)(o.B,{direction:"horizontal",children:(0,w.jsx)(g.Q,{variant:t?"primary":"default",size:"small",onClick:function(e){return e.stopPropagation()||r()},children:"Done"})})}var X=(0,c.createContext)(null);function Z(e){var t=e.name,r=e.avatar,n=e.yearsActive,i=e.wikiLink;return(0,w.jsxs)(o.B,{direction:"horizontal",align:"center",justify:"center",children:[(0,w.jsx)(d.A,{square:!0,size:{narrow:50,regular:100,wide:100},src:r}),(0,w.jsxs)(o.B,{direction:"vertical",align:"center",gap:"condensed",children:[(0,w.jsx)(a.A,{as:"h3",variant:"medium",children:t}),(0,w.jsx)(f.A,{children:n}),(0,w.jsx)(M,{value:i})]})]})}function ee(e){var t=e.url,r=(0,c.useContext)(X),n=r.albums,o=r.setAlbums,a=r.composerMetadata,i=r.setComposerMetadata,l=r.searchAlbums,s=(0,c.useContext)(I).appLoadType;"create"===s&&(0,c.useEffect)(function(){return $.get(t,function(e){var r,n,a,l=(r=$(e),a=(n=$("table.vcard",r)).find("tr"),{composerName:n.find(".infobox-above").text().trim(),composerPic:h(n.find(".infobox-image img").attr("src")),yearsActive:a.find(".infobox-label:contains(Years) ~ td").text()});l.wikiLink=t.split("/").at(-2),W(l.composerPic,function(e){l.composerPic=e,i(l)}),o(function(e){return $("td > i > a",e).map(function(){var e=$(this);return{albumName:e.attr("title").replaceAll(" ","_"),isLinkValid:!e.hasClass("new")}}).get()}($(e)))})},[]);var u=l.length?l:n,d="create"===s?t+(null==l?void 0:l.length):null==l?void 0:l.length;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(Z,{name:a.composerName,avatar:a.composerPic,yearsActive:a.yearsActive,wikiLink:a.wikiLink}),(0,w.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 250px))",justifyContent:"center"},children:u.map(function(e){var t=e.albumName,r=e.isLinkValid;return(0,w.jsx)(q,{name:t,isLinkValid:r},t)})},d)]})}var te=r(3764);function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ne(e){var t,r,n=e.composerName,o=e.updateSavedComposers,a=(0,c.useContext)(I).appLoadType,i=(t=(0,c.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?re(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],s=i[1];return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(g.Q,{variant:"primary",onClick:function(){o({name:n}),s(!0)},disabled:!a,trailingVisual:(0,w.jsx)(x.bN0,{size:16}),children:"Save"}),l&&setTimeout(function(){return s(!1)},2e3)&&(0,w.jsx)(te.l,{className:"banner",title:"Success",onDismiss:function(){s(!1)},description:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("b",{children:n})," data has been successfully saved!"]})})]})}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ae(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ie(e){var t=e.toggleImportDialog,r=e.toggleBanner,n=e.updateImportedComposers,o=e.allComposers,a=(0,c.useRef)(null),i=oe((0,c.useState)(null),2),l=i[0],s=i[1],u=oe((0,c.useState)(""),2),d=u[0],f=u[1],m=oe((0,c.useState)(null),2),p=m[0],h=m[1];return(0,w.jsx)(j.l,{title:"Import Composer",onClose:function(){return t(!1)},footerButtons:[{buttonType:"default",content:"Cancel",onClick:function(){return t(!1)}},{buttonType:"primary",content:"Import",onClick:function(){var e;!p&&((e=new FileReader).onload=function(){var o=e.result;try{var a=JSON.parse(o),i=a.composerMetadata,l=d||i.composerName;n({name:l,data:a}),h(null),s(null),r(!0),t(!1)}catch(e){h("operation")}},e.readAsText(l))},disabled:!(null!=l&&l.name)||p}],children:(0,w.jsxs)(S.A,{children:[(0,w.jsx)(S.A.Label,{children:"Composer Name"}),(0,w.jsx)(A.A,{placeholder:"Custom name",onChange:function(e){return f(e.target.value),void("saved"===(t=e.target.value)||"imported"===t?h("name"):o.includes(t)?h("conflict"):h(null));var t}}),(0,w.jsx)(S.A.Caption,{children:"This name will be shown under the Imported section"}),(0,w.jsx)(g.Q,{onClick:function(){return a.current.click()},children:"Choose file"}),(0,w.jsx)("input",{type:"file",accept:".json",ref:a,onChange:function(e){var t=e.target.files[0];null!=t&&t.name&&"application/json"===(null==t?void 0:t.type)?(h(null),s(t)):(s(null),h("file"))},style:{display:"none"}}),"name"===p&&(0,w.jsx)(S.A.Validation,{variant:"error",children:"Invalid composer name"}),"conflict"==p&&(0,w.jsx)(S.A.Validation,{variant:"error",children:"Composer name already exists"}),(null==l?void 0:l.name)&&(0,w.jsxs)(v.v,{variant:"success",children:["Selected ",null==l?void 0:l.name]}),"file"===p&&(0,w.jsx)(v.v,{variant:"critical",children:"Invalid file. Please try again"}),"operation"===p&&(0,w.jsx)(v.v,{variant:"critical",children:"Something went wrong. Please try again"})]})})}function le(e){var t=e.updateImportedComposers,r=e.allComposers,n=oe((0,c.useState)(!1),2),o=n[0],a=n[1],i=oe((0,c.useState)(!1),2),l=i[0],s=i[1];return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(g.Q,{trailingVisual:(0,w.jsx)(x.s3U,{size:16}),onClick:function(){return a(!0)},children:"Import"}),o&&(0,w.jsx)(ie,{toggleImportDialog:a,toggleBanner:s,updateImportedComposers:t,allComposers:r}),l&&setTimeout(function(){return s(!1)},2e3)&&(0,w.jsx)(te.l,{className:"banner",title:"Success",onDismiss:function(){s(!1)},description:(0,w.jsx)(w.Fragment,{children:"Composer data has been successfully imported!"})})]})}var se=r(2695);function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ce(e){var t,r,n=e.exportData,o=(0,c.useRef)(null),a=n.composerMetadata,i=(0,c.useContext)(I).appLoadType,l=(t=(0,c.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return ue(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ue(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=l[0],u=l[1];return(0,c.useEffect)(function(){s&&o.current.click()},[s]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(g.Q,{trailingVisual:(0,w.jsx)(x.JMY,{size:16}),disabled:!i,loading:s,onClick:function(){u(!0),setTimeout(function(){return u(!1)},3e3)},children:"Export"}),s&&(0,w.jsx)(se.A,{ref:o,href:"data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(n)),download:"".concat(a.composerName,".json"),style:{display:"none"}})]})}var de=r(1746),fe=r(2797),me=r(3683);function pe(e){var t=e.type,r=e.name,n=e.description,a=e.selections,i=e.setSelection,l=e.deleteComposer;return(0,w.jsxs)(fe.W,{children:[(0,w.jsx)(fe.W.Anchor,{children:(0,w.jsxs)(me.l.Item,{children:[r,(0,w.jsx)(me.l.Description,{variant:"block",children:n})]})}),(0,w.jsx)(fe.W.Overlay,{children:(0,w.jsx)(me.l,{children:a.map(function(e,r){return(0,w.jsx)(me.l.Item,{onSelect:function(){return i({type:t,index:r})},children:(0,w.jsxs)(o.B,{direction:"horizontal",align:"center",justify:"space-between",children:[e,(0,w.jsx)(A.A.Action,{"aria-label":"Delete",icon:x.qhh,as:"button",onClick:function(t){t.stopPropagation(),l(e)}})]})},r)})})})]})}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ye(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ye(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function be(e){var t=e.handlers,r=e.savedComposers,n=e.importedComposers,o=e.deleteComposer,a=he((0,c.useState)({}),2),i=a[0],l=a[1],s=he((0,c.useState)(!1),2),d=s[0],f=s[1],m=he((0,c.useState)(!1),2),p=m[0],h=m[1],y=he((0,c.useState)(null),2),b=y[0],g=y[1],v=t.setComposerMetadata,j=t.setAlbums,x=t.setAlbumsMetadata,S=t.setCompletedAlbums,A=t.setSongs,C=t.setLikedSongs,k=(0,c.useContext)(I),O=k.setAppLoadType,M=k.appLoadType;function L(e){var t=e.type,r=e.index,n=u(t)[r],o=u(n),a=o.composerMetadata,i=o.albums,l=o.albumsMetadata,s=o.completedAlbums,c=o.songs,d=o.likedSongs;O("load"),v(a),j(i),x(l),S(s),A(c),C(d)}function P(e){var t=e.type,r=e.index;M?(l({type:t,index:r}),f(!0)):L({type:t,index:r})}function T(e){g(e),h(!0)}return(0,w.jsxs)(w.Fragment,{children:[d?(0,w.jsxs)(de.K,{onClose:function(e){"confirm"===e&&L(i),f(!1)},title:"Load Composer",width:"large",height:"auto",confirmButtonType:"danger",confirmButtonContent:"Yes",children:["Are you sure you want to load composer data? ",(0,w.jsx)("br",{}),"This action will replace the current data."]}):null,p?(0,w.jsxs)(de.K,{onClose:function(e){"confirm"===e&&o(b),h(!1)},title:"Delete Composer",width:"large",height:"auto",confirmButtonType:"danger",confirmButtonContent:"Delete",children:["Are you sure you want to delete this composer data? ",(0,w.jsx)("br",{}),"This action cannot be undone."]}):null,(0,w.jsxs)(fe.W,{children:[(0,w.jsx)(fe.W.Button,{variant:"danger",children:"Load"}),(0,w.jsxs)(fe.W.Overlay,{top:85,children:[(0,w.jsx)(pe,{type:"saved",name:"Local Storage",description:"Data loaded from Browser's localStorage",selections:r,setSelection:P,deleteComposer:T}),(0,w.jsx)(pe,{type:"imported",name:"Imported",description:"Data loaded from Import store",selections:n,setSelection:P,deleteComposer:T})]})]})]})}function ge(e){return function(e){if(Array.isArray(e))return xe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||je(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){if(e){if("string"==typeof e)return xe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xe(e,t):void 0}}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Se(e,t,r){var n,o,a,l,c=r.composerMetadata;s(t,{albums:r.albums,composerMetadata:c,albumsMetadata:r.albumsMetadata,completedAlbums:r.completedAlbums,songs:r.songs,likedSongs:r.likedSongs}),o=t,!(a=u(n=e)).includes(o)&&a.push(o)&&s(n,function(e){if(Array.isArray(e))return i(e)}(l=a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(l)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}function Ae(){var e=(0,c.useContext)(X),t=e.albums,r=e.setAlbums,n=e.composerMetadata,o=e.setComposerMetadata,a=(0,c.useContext)(_),i=a.completedAlbums,l=a.setCompletedAlbums,d=a.albumsMetadata,f=a.setAlbumsMetadata,m=(0,c.useContext)(z),p=m.songs,h=m.setSongs,y=m.likedSongs,b=m.setLikedSongs,g=ve((0,c.useState)(u("saved")),2),v=g[0],j=g[1],x=ve((0,c.useState)(u("imported")),2),S=x[0],A=x[1],C={setComposerMetadata:o,setAlbums:r,setAlbumsMetadata:f,setCompletedAlbums:l,setSongs:h,setLikedSongs:b},k={albums:t,composerMetadata:n,albumsMetadata:d,completedAlbums:i,songs:p,likedSongs:y};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(ne,{composerName:n.composerName,updateSavedComposers:function(e){var t=e.name;j(function(e){return e.includes(t)?ge(t):[].concat(ge(e),[t])}),Se("saved",t,k)}}),(0,w.jsx)(le,{updateImportedComposers:function(e){var t=e.name,r=e.data;A(function(e){return e.includes(t)?ge(t):[].concat(ge(e),[t])}),Se("imported",t,r)},allComposers:[].concat(ge(v),ge(S))}),(0,w.jsx)(ce,{exportData:k}),(0,w.jsx)(be,{handlers:C,savedComposers:v,importedComposers:S,deleteComposer:function(e){var t;t=e,localStorage.removeItem(t);var r=u("imported").filter(function(t){return!(t===e)}),n=u("saved").filter(function(t){return!(t===e)});s("imported",r),s("saved",n),j(n),A(r)}})]})}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function we(){var e,t,r=(e=(0,c.useState)(""),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ce(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ce(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],o=r[1],a=(0,c.useContext)(I).appLoadType,i=(0,c.useContext)(X),l=i.albums,s=i.setSearchAlbums,u=i.setAlbums;function d(){if(n){var e=l.filter(function(e){var t=e.albumName.toLowerCase();return t.startsWith(n)||t.includes(n)});e.length&&s(e)}}return(0,w.jsx)(A.A,{trailingAction:(0,w.jsx)(A.A.Action,{"aria-label":"Search",icon:x.WIv,as:"button",onClick:d,disabled:!n}),placeholder:"Search",block:"true",onChange:function(e){return e.target.value?o(e.target.value.toLowerCase()):(o(""),s([]),u(l))},disabled:!a,onKeyDown:function(e){return"Enter"===e.key&&d()}})}function ke(){return l("saved",[]),l("imported",[]),(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(o.B,{direction:"horizontal",align:"center",gap:"spacious",padding:"condensed",children:[(0,w.jsx)(o.B.Item,{children:(0,w.jsx)(a.A,{as:"h2",children:"WikiSongs"})}),(0,w.jsx)(o.B.Item,{grow:!0,children:(0,w.jsx)(we,{})}),(0,w.jsx)(o.B.Item,{children:(0,w.jsx)(o.B,{direction:"horizontal",children:(0,w.jsx)(Ae,{})})})]})})}var Oe=r(6046),Ie=r(1298),Me=r(1522);function Le(){return(0,w.jsxs)(o.B,{justify:"center",align:"center",gap:"none",children:[(0,w.jsxs)(f.A,{children:["Made with ",(0,w.jsx)(x.zwu,{size:16})," by ",(0,w.jsx)(se.A,{href:"https://github.com/rayep",target:"_blank",children:"Ray A."})]}),(0,w.jsxs)(f.A,{size:"small",weight:"semibold",children:["Powered by ",(0,w.jsx)(se.A,{href:"https://primer.style/",target:"_blank",children:"Primer-React"})]})]})}function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Te(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Te(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function De(){var e=Pe((0,c.useState)(""),2),t=e[0],r=e[1],n=Pe((0,c.useState)(!1),2),o=n[0],a=n[1],i=Pe((0,c.useState)([]),2),l=i[0],s=i[1],u=Pe((0,c.useState)([]),2),d=u[0],f=u[1],m=Pe((0,c.useState)({}),2),p=m[0],h=m[1],y=Pe((0,c.useState)({}),2),b=y[0],g=y[1],v=Pe((0,c.useState)({}),2),j=v[0],x=v[1],S=Pe((0,c.useState)({}),2),A=S[0],C=S[1],k=Pe((0,c.useState)({}),2),O=k[0],M=k[1];return(0,w.jsx)(Oe.NP,{colorMode:o?"dark":"light",children:(0,w.jsx)(Ie.A,{children:(0,w.jsx)(I,{value:{appLoadType:t,setAppLoadType:r,darkMode:o,setDarkMode:a},children:(0,w.jsx)(X,{value:{albums:l,setAlbums:s,composerMetadata:p,setComposerMetadata:h,searchAlbums:d,setSearchAlbums:f},children:(0,w.jsx)(_,{value:{completedAlbums:b,setCompletedAlbums:g,albumsMetadata:j,setAlbumsMetadata:x},children:(0,w.jsx)(z,{value:{songs:A,setSongs:C,likedSongs:O,setLikedSongs:M},children:(0,w.jsxs)(Me.M,{padding:"none",columnGap:"none",rowGap:"none",containerWidth:"auto",children:[(0,w.jsx)(Me.M.Header,{divider:"line",className:"header",children:(0,w.jsx)(ke,{})}),(0,w.jsx)(Me.M.Content,{className:"dashboard",children:(0,w.jsx)(T,{})}),(0,w.jsx)(Me.M.Footer,{divider:"line",className:"footer",children:(0,w.jsx)(Le,{})})]})})})})})})})}(0,n.createRoot)(document.getElementById("app")).render((0,w.jsx)(De,{}))}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var a=r[e]={id:e,loaded:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=t,e=[],n.O=(t,r,o,a)=>{if(!r){var i=1/0;for(c=0;c<e.length;c++){for(var[r,o,a]=e[c],l=!0,s=0;s<r.length;s++)(!1&a||i>=a)&&Object.keys(n.O).every(e=>n.O[e](r[s]))?r.splice(s--,1):(l=!1,a<i&&(i=a));if(l){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,o,a]},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={524:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,a,[i,l,s]=r,u=0;if(i.some(t=>0!==e[t])){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(s)var c=s(n)}for(t&&t(r);u<i.length;u++)a=i[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},r=self.webpackChunkwikisongs=self.webpackChunkwikisongs||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var o=n.O(void 0,[96],()=>n(104));o=n.O(o)})();